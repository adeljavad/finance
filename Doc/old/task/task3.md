# ุชุญูู ุฌุงูุน ุจุฑุง ุณุงุฎุชุงุฑ ุฏุชุงุจุณ ุณุณุชู ูุงู ู ูุฑูุฏ ุงฺฉุณู

## ๐ฏ ูุงุฒููุฏโูุง ุงุตู ุดูุงุณุง ุดุฏู:

### ฑ. **ุณุงุฎุชุงุฑ ุงุณุชุงูุฏุงุฑุฏ ุงุณูุงุฏ ุญุณุงุจุฏุงุฑ ุงุฑุงู**
### ฒ. **ุณุณุชู ฺฉุดู ู ุชุทุจู ุฎูุฏฺฉุงุฑ ุณุชููโูุง ุงฺฉุณู**
### ณ. **ฺฉูุชุฑูโูุง ฺฉูพุงุฑฺฺฏ ุฏุงุฏูโูุง**
### ด. **ูพุฑุฏุงุฒุด ุงูุฒุงุด (Incremental)**
### ต. **ูุฏุฑุช ฺฉุฏูฺฏ ุณูุณูู ูุฑุงุชุจ**

## ๐ ุชุณฺฉโูุง ุฌุฏุฏ ููุฑุฏ ูุงุฒ (ุงุถุงูู ุจู ฑดฐ ุชุณฺฉ ูุจู)

### **ูุงุฒ ฒ-ุงูู: ุงุณุชุงูุฏุงุฑุฏุณุงุฒ ุณุงุฎุชุงุฑ ุฏุงุฏูโูุง ูุงู** (ุชุณฺฉโูุง ฑดฑ-ฑถฐ)

```
141. **ุชุญูู ุณุงุฎุชุงุฑ ุฎุฑูุฌ ุงฺฉุณู ูุฑูโุงูุฒุงุฑูุง ููฺฉุงุฑุงู ุณุณุชูุ ุฑุงูฺฉุงุฑุงูุ ุณูพุฏุงุฑ**
142. **ุทุฑุงุญ ูุฏู ุงุณุชุงูุฏุงุฑุฏ ุงุณูุงุฏ ุญุณุงุจุฏุงุฑ ุงุฑุงู**
143. **ุงุฌุงุฏ ูุฏู DocumentHeader ุจุฑุง ุณุฑุจุฑฺฏ ุงุณูุงุฏ**
144. **ูพุงุฏูโุณุงุฒ ูุฏู DocumentItem ุจุฑุง ุขุฑุชฺฉูโูุง ุณูุฏ**
145. **ุชุนุฑู ูุฏู CodingStructure ุจุฑุง ฺฉุฏูฺฏ ฺฉู-ูุนู-ุชูุตู**
146. **ุงุฌุงุฏ ุณุณุชู ฺฉุดู ุฎูุฏฺฉุงุฑ ุณุงุฎุชุงุฑ ุงฺฉุณู (Auto-Detection)**
147. **ูพุงุฏูโุณุงุฒ ุงูฺฏูุฑุชู ุชุทุจู ุณุชููโูุง ุงฺฉุณู ุจุง ูุฏูโูุง ุฏุชุงุจุณ**
148. **ุงุฌุงุฏ mapping table ุจุฑุง ูฺฏุงุดุช ููุฏูุง ูุฎุชูู ูุฑูโุงูุฒุงุฑูุง**
149. **ูพุงุฏูโุณุงุฒ validator ุจุฑุง ูุฑูุช ุชุงุฑุฎโูุง ุดูุณ**
150. **ุงุฌุงุฏ ฺฉูุชุฑู ฺฉูพุงุฑฺฺฏ ุงุฑุฒ (ุฑุงูุ ุงุฑุฒ)**
```

### **ูุงุฒ ฒ-ุจ: ฺฉูุชุฑูโูุง ฺฉูพุงุฑฺฺฏ ู ูพุดโูพุฑุฏุงุฒุด** (ุชุณฺฉโูุง ฑถฑ-ฑธฐ)

```
161. **ูพุงุฏูโุณุงุฒ ุณุณุชู ุชุดุฎุต ุงุณูุงุฏ ุชฺฉุฑุงุฑ**
162. **ุงุฌุงุฏ ฺฉูุชุฑู ุชูุงู ุดูุงุฑู ุงุณูุงุฏ**
163. **ูพุงุฏูโุณุงุฒ ฺฉูุชุฑู ูุฌูุฏ ฺฉุฏูฺฏ ูุจู ุงุฒ ุฏุฑุฌ ุณูุฏ**
164. **ุงุฌุงุฏ ุณุณุชู ูุฏุฑุช ุฎุทุง ุฏุฑ ูุฑูุฏ ุฏุงุฏู**
165. **ูพุงุฏูโุณุงุฒ ฺฏุฒุงุฑุด ุฎุทุงูุง ุงุนุชุจุงุฑุณูุฌ**
166. **ุงุฌุงุฏ queue system ุจุฑุง ูพุฑุฏุงุฒุด ูุงูโูุง ุจุฒุฑฺฏ**
167. **ูพุงุฏูโุณุงุฒ rollback mechanism ุจุฑุง ุฏุงุฏูโูุง ูุงูุต**
168. **ุงุฌุงุฏ ุณุณุชู audit trail ุจุฑุง ุชูุงู ุนููุงุช ูุฑูุฏ ุฏุงุฏู**
169. **ูพุงุฏูโุณุงุฒ ฺฉูุชุฑู ุชูุงุฒู ุจุฏูฺฉุงุฑ ู ุจุณุชุงูฺฉุงุฑ ุงุณูุงุฏ**
170. **ุงุฌุงุฏ ุณุณุชู ุชุนูุฑ ุฎูุฏฺฉุงุฑ ุฏุงุฏูโูุง ูุงูุต**
```

### **ูุงุฒ ฒ-ุฌ: ูพุฑุฏุงุฒุด ุงูุฒุงุด ู ุจูููโุณุงุฒ** (ุชุณฺฉโูุง ฑธฑ-ฒฐฐ)

```
181. **ูพุงุฏูโุณุงุฒ ุณุณุชู ุชุดุฎุต ุขุฎุฑู ุณูุฏ ูุงุฑุฏ ุดุฏู**
182. **ุงุฌุงุฏ ูฺฉุงูุฒู incremental loading ุจุฑ ุงุณุงุณ ุชุงุฑุฎ**
183. **ูพุงุฏูโุณุงุฒ ฺฉูุชุฑู ุชุบุฑุงุช ุฏุงุฏูโูุง ูุจู**
184. **ุงุฌุงุฏ ุณุณุชู versioning ุจุฑุง ุฏุงุฏูโูุง ูุงู**
185. **ูพุงุฏูโุณุงุฒ ุจูููโุณุงุฒ bulk insert ุจุฑุง ุฏุงุฏูโูุง ุญุฌู**
186. **ุงุฌุงุฏ indexูุง ุจููู ุจุฑุง ุฌุณุชุฌู ุณุฑุน**
187. **ูพุงุฏูโุณุงุฒ ุณุณุชู cache ุจุฑุง ุฏุงุฏูโูุง ูพุฑฺฉุงุฑุจุฑุฏ**
188. **ุงุฌุงุฏ background task ุจุฑุง ูพุฑุฏุงุฒุด ูุงูโูุง ุจุฒุฑฺฏ**
189. **ูพุงุฏูโุณุงุฒ ุณุณุชู pause/resume ุจุฑุง ุขูพููุฏูุง ุทููุงู**
190. **ุงุฌุงุฏ ฺฏุฒุงุฑุด ูพุดุฑูุช ุนููุงุช ูุฑูุฏ ุฏุงุฏู**
```

## ๐๏ธ ุทุฑุงุญ ูุฏูโูุง ุฏุชุงุจุณ ูพุดููุงุฏ

```python
# models.py - ูุฏูโูุง ุฌุฏุฏ ุจุฑุง ุณุงุฎุชุงุฑ ูุงู

class FinancialSoftware(models.Model):
    """ูุฏู ุจุฑุง ูฺฏุงุดุช ูุฑูโุงูุฒุงุฑูุง ูุงู ูุฎุชูู"""
    name = models.CharField(max_length=100, verbose_name='ูุงู ูุฑูโุงูุฒุงุฑ')
    version = models.CharField(max_length=50, verbose_name='ูุณุฎู')
    description = models.TextField(verbose_name='ุชูุถุญุงุช')
    is_active = models.BooleanField(default=True)

class ExcelColumnMapping(models.Model):
    """ูฺฏุงุดุช ุณุชููโูุง ุงฺฉุณู ุจู ููุฏูุง ุฏุชุงุจุณ"""
    software = models.ForeignKey(FinancialSoftware, on_delete=models.CASCADE)
    excel_column = models.CharField(max_length=100, verbose_name='ุณุชูู ุงฺฉุณู')
    db_field = models.CharField(max_length=100, verbose_name='ููุฏ ุฏุชุงุจุณ')
    data_type = models.CharField(max_length=50, verbose_name='ููุน ุฏุงุฏู')
    is_required = models.BooleanField(default=False)

class DocumentHeader(models.Model):
    """ุณุฑุจุฑฺฏ ุงุณูุงุฏ ุญุณุงุจุฏุงุฑ"""
    DOCUMENT_TYPES = [
        ('SANAD', 'ุณูุฏ'),
        ('FACTOR', 'ูุงฺฉุชูุฑ'),
        ('DARVAGOZAR', 'ุฏุฑุงูุช ู ูพุฑุฏุงุฎุช'),
        ('ANBAR', 'ุงูุจุงุฑ'),
    ]
    
    document_id = models.CharField(max_length=50, unique=True, verbose_name='ุดูุงุฑู ุณูุฏ')
    document_type = models.CharField(max_length=20, choices=DOCUMENT_TYPES)
    document_date = models.DateField(verbose_name='ุชุงุฑุฎ ุณูุฏ')
    description = models.TextField(verbose_name='ุดุฑุญ ุณูุฏ')
    total_debit = models.DecimalField(max_digits=15, decimal_places=2, verbose_name='ูุฌููุน ุจุฏูฺฉุงุฑ')
    total_credit = models.DecimalField(max_digits=15, decimal_places=2, verbose_name='ูุฌููุน ุจุณุชุงูฺฉุงุฑ')
    company = models.ForeignKey(Company, on_delete=models.CASCADE)
    created_at = models.DateTimeField(auto_now_add=True)
    imported_from = models.ForeignKey(FinancialSoftware, on_delete=models.SET_NULL, null=True)

class DocumentItem(models.Model):
    """ุขุฑุชฺฉูโูุง ุณูุฏ"""
    document = models.ForeignKey(DocumentHeader, on_delete=models.CASCADE, related_name='items')
    row_number = models.IntegerField(verbose_name='ุฑุฏู')
    account_code = models.CharField(max_length=50, verbose_name='ฺฉุฏ ุญุณุงุจ')
    debit = models.DecimalField(max_digits=15, decimal_places=2, default=0, verbose_name='ุจุฏูฺฉุงุฑ')
    credit = models.DecimalField(max_digits=15, decimal_places=2, default=0, verbose_name='ุจุณุชุงูฺฉุงุฑ')
    description = models.TextField(verbose_name='ุดุฑุญ')
    cost_center = models.CharField(max_length=50, blank=True, verbose_name='ูุฑฺฉุฒ ูุฒูู')
    project_code = models.CharField(max_length=50, blank=True, verbose_name='ฺฉุฏ ูพุฑูฺู')

class CodingStructure(models.Model):
    """ุณุงุฎุชุงุฑ ฺฉุฏูฺฏ ุญุณุงุจุฏุงุฑ"""
    ACCOUNT_LEVELS = [
        ('CLASS', 'ฺฉู'),
        ('SUBCLASS', 'ูุนู'),
        ('DETAIL', 'ุชูุตู'),
        ('COST_CENTER', 'ูุฑฺฉุฒ ูุฒูู'),
        ('PROJECT', 'ูพุฑูฺู'),
    ]
    
    code = models.CharField(max_length=50, unique=True, verbose_name='ฺฉุฏ')
    name = models.CharField(max_length=200, verbose_name='ูุงู')
    level = models.CharField(max_length=20, choices=ACCOUNT_LEVELS)
    parent = models.ForeignKey('self', on_delete=models.CASCADE, null=True, blank=True)
    is_active = models.BooleanField(default=True)
    description = models.TextField(blank=True)
```

## ๐ง ุทุฑุงุญ ุณุณุชู ฺฉุดู ุฎูุฏฺฉุงุฑ ุณุงุฎุชุงุฑ ุงฺฉุณู

```python
# excel_auto_detector.py
class ExcelStructureDetector:
    def detect_software_pattern(self, file_path):
        """ุชุดุฎุต ุงูฺฏู ูุฑูโุงูุฒุงุฑ ูุงู ุจุฑ ุงุณุงุณ ุณุงุฎุชุงุฑ ูุงู"""
        pass
        
    def map_columns_automatically(self, df):
        """ูฺฏุงุดุช ุฎูุฏฺฉุงุฑ ุณุชููโูุง ุงฺฉุณู"""
        pass
        
    def validate_mapping(self, mapping):
        """ุงุนุชุจุงุฑุณูุฌ ูฺฏุงุดุช ุงูุฌุงู ุดุฏู"""
        pass
        
    def suggest_corrections(self, detected_mapping):
        """ูพุดููุงุฏ ุชุตุญุญ ุจุฑุง ูฺฏุงุดุชโูุง ูุดฺฉูฺฉ"""
        pass
```

## ๐ก๏ธ ุทุฑุงุญ ุณุณุชู ฺฉูุชุฑู ฺฉูพุงุฑฺฺฏ

```python
# data_integrity_controller.py
class DataIntegrityController:
    def check_duplicate_documents(self, document_data):
        """ฺฉูุชุฑู ุชฺฉุฑุงุฑ ูุจูุฏู ุงุณูุงุฏ"""
        pass
        
    def validate_coding_structure(self, account_codes):
        """ุงุนุชุจุงุฑุณูุฌ ูุฌูุฏ ฺฉุฏูฺฏ ุฏุฑ ุฏุชุงุจุณ"""
        pass
        
    def check_document_balance(self, items):
        """ฺฉูุชุฑู ุชูุงุฒู ุจุฏูฺฉุงุฑ ู ุจุณุชุงูฺฉุงุฑ ุณูุฏ"""
        pass
        
    def validate_sequence(self, document_numbers):
        """ฺฉูุชุฑู ุชูุงู ุดูุงุฑู ุงุณูุงุฏ"""
        pass
```

## ๐ ุทุฑุงุญ ูพุฑุฏุงุฒุด ุงูุฒุงุด

```python
# incremental_processor.py
class IncrementalDataProcessor:
    def find_last_imported_document(self, company_id):
        """ุงูุชู ุขุฎุฑู ุณูุฏ ูุงุฑุฏ ุดุฏู"""
        pass
        
    def filter_new_data(self, df, last_document_date):
        """ููุชุฑ ฺฉุฑุฏู ุฏุงุฏูโูุง ุฌุฏุฏ"""
        pass
        
    def detect_changes(self, existing_data, new_data):
        """ุชุดุฎุต ุชุบุฑุงุช ุฏุฑ ุฏุงุฏูโูุง ูุจู"""
        pass
        
    def create_import_batch(self, data):
        """ุงุฌุงุฏ ุจุณุชูโูุง ุฏุงุฏู ุจุฑุง ุฏุฑุฌ"""
        pass
```

## ๐ ุงูููุชโุจูุฏ ุงุฌุฑุง ุจุฑุง ููุชู ุขูุฏู

### **ููุชู ฑ: ุงุณุชุงูุฏุงุฑุฏุณุงุฒ ู ูุฏูโุณุงุฒ**
```python
# ุฑูุฒ ฑ-ฒ:
141. **ุชุญูู ุณุงุฎุชุงุฑ ุฎุฑูุฌ ุงฺฉุณู ูุฑูโุงูุฒุงุฑูุง ุงุฑุงู**
142. **ุทุฑุงุญ ูุฏู ุงุณุชุงูุฏุงุฑุฏ ุงุณูุงุฏ ุญุณุงุจุฏุงุฑ**

# ุฑูุฒ ณ-ด:
143. **ูพุงุฏูโุณุงุฒ ูุฏูโูุง DocumentHeader ู DocumentItem**
144. **ุงุฌุงุฏ ูุฏู CodingStructure ุจุฑุง ฺฉุฏูฺฏ**

# ุฑูุฒ ต-ท:
145. **ูพุงุฏูโุณุงุฒ ุณุณุชู ฺฉุดู ุฎูุฏฺฉุงุฑ ุณุงุฎุชุงุฑ ุงฺฉุณู**
146. **ุงุฌุงุฏ mapping table ุจุฑุง ูุฑูโุงูุฒุงุฑูุง ูุฎุชูู**
```

### **ููุชู ฒ: ฺฉูุชุฑูโูุง ฺฉูพุงุฑฺฺฏ**
```python
# ุฑูุฒ ธ-ฑฐ:
161. **ูพุงุฏูโุณุงุฒ ุณุณุชู ุชุดุฎุต ุงุณูุงุฏ ุชฺฉุฑุงุฑ**
162. **ุงุฌุงุฏ ฺฉูุชุฑู ูุฌูุฏ ฺฉุฏูฺฏ ูุจู ุงุฒ ุฏุฑุฌ**

# ุฑูุฒ ฑฑ-ฑด:
163. **ูพุงุฏูโุณุงุฒ ฺฉูุชุฑู ุชูุงุฒู ุงุณูุงุฏ**
164. **ุงุฌุงุฏ ุณุณุชู ูุฏุฑุช ุฎุทุง ู ฺฏุฒุงุฑุดโฺฏุฑ**
```

## ๐ก ูฺฉุงุช ูู ููู:

1. **ุงุฒ UUID ุจุฑุง ฺฉูุฏูุง ุงุตู ุงุณุชูุงุฏู ุดูุฏ**
2. **ุงุฌุงุฏ ุงูุฏฺฉุณ ุจุฑุง ููุฏูุง ุฌุณุชุฌู ูพุฑุชฺฉุฑุงุฑ**
3. **ูพุงุฏูโุณุงุฒ soft delete ุจุฑุง ุฏุงุฏูโูุง ูุงู**
4. **ุงุณุชูุงุฏู ุงุฒ transaction ุจุฑุง ุนููุงุช ฺฏุฑูู**
5. **ุงุฌุงุฏ ุณุณุชู backup ุฎูุฏฺฉุงุฑ ูุจู ุงุฒ ุนููุงุช ูุฑูุฏ ุฏุงุฏู**

**ุขุง ูุงูุฏ ุจุง ุชุณฺฉ ฑดฑ (ุชุญูู ุณุงุฎุชุงุฑ ุฎุฑูุฌ ุงฺฉุณู ูุฑูโุงูุฒุงุฑูุง ุงุฑุงู) ุดุฑูุน ฺฉููุ** ูุงุฒ ุฏุงุฑู ูููููโุง ุงุฒ ุฎุฑูุฌ ุงฺฉุณู ุงู ูุฑูโุงูุฒุงุฑูุง ุฑุง ุจุจูู ุชุง ุชุญูู ุฏููโุชุฑ ุงุฑุงุฆู ุฏูู.