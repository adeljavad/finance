

# پیشنهاد کتابخانه مناسب برای چت‌بات حسابرسی با Django و React

## 1. توصیه نهایی: ترکیب دو کتابخانه تخصصی

بر اساس تحلیل جامع نیازهای پروژه شما، که شامل یک چت‌بات هوشمند حسابرسی با بک‌اند Django و فرانت‌اند React می‌باشد، بهترین راه‌حل استفاده از ترکیب دو کتابخانه تخصصی است. این رویکرد به شما امکان می‌دهد تا از بهترین ابزارهای موجود برای هر بخش از پروژه استفاده کنید و در عین حال انعطاف‌پذیری و قابلیت شخصی‌سازی بالایی داشته باشید. برای فرانت‌اند، کتابخانه **Chatbot UI** به دلیل رابط کاربری شبیه ChatGPT و قابلیت‌های گسترده‌اش پیشنهاد می‌شود. برای بک‌اند، با توجه به نیاز به یکپارچه‌سازی با LangChain، استفاده از کتابخانه **django-ai-assistant** توصیه می‌گردد. این ترکیب به شما اجازه می‌دهد تا از قدرت پردازش Django در بک‌اند و انعطاف‌پذیری React در فرانت‌اند بهره‌مند شوید، در حالی که یکپارچه‌سازی بین این دو را از طریق APIهای RESTful به سادگی مدیریت کنید.

### 1.1. کتابخانه Frontend: Chatbot UI

کتابخانه **Chatbot UI**، که توسط mckaywrigley توسعه یافته است، یکی از بهترین گزینه‌ها برای ایجاد رابط کاربری چت‌بات در پروژه شماست. این کتابخانه به صورت متن‌باز در دسترس است و دارای یک جامعه فعال و پشتیبانی قوی است، که از **32.5k ستاره در GitHub** برخوردار است . این کتابخانه به طور خاص برای ایجاد رابط‌های کاربری شبیه ChatGPT طراحی شده است و از ویژگی‌های پیشرفته‌ای مانند پشتیبانی از چندین مدل زبانی، امکان بارگذاری فایل‌ها، و قابلیت شخصی‌سازی بالا برخوردار است. استفاده از این کتابخانه به شما این امکان را می‌دهد که به جای صرف زمان زیاد برای طراحی و توسعه رابط کاربری از ابتدا، بر منطق اصلی برنامه و ویژگی‌های منحصربه‌فرد چت‌بات حسابرسی خود تمرکز کنید.

#### 1.1.1. معرفی و ویژگی‌ها

کتابخانه **Chatbot UI** یک تمپلیت React است که به طور خاص برای ساخت رابط‌های کاربری چت‌بات با الهام از طراحی ChatGPT توسعه یافته است . این کتابخانه با استفاده از **React** و **Tailwind CSS** ساخته شده است و از ویژگی‌های پیشرفته‌ای مانند **پشتیبانی از چندین مدل زبانی**، **امکان بارگذاری فایل‌ها**، و **قابلیت شخصی‌سازی بالا** برخوردار است . یکی از مهم‌ترین ویژگی‌های این کتابخانه، پشتیبانی از **LangChain.js** است که امکان یکپارچه‌سازی آسان با بک‌اند Django که از LangChain استفاده می‌کند را فراهم می‌کند . همچنین، این کتابخانه از **streaming** پاسخ‌ها پشتیبانی می‌کند، که به کاربران این امکان را می‌دهد تا پاسخ‌های تولید شده توسط مدل زبانی را به صورت بلادرنگ مشاهده کنند. این ویژگی برای بهبود تجربه کاربری و ایجاد حس تعامل بیشتر با چت‌بات بسیار مؤثر است. علاوه بر این، Chatbot UI از **function calling** پشتیبانی می‌کند، که به شما این امکان را می‌دهد تا توابع سفارشی را تعریف کرده و آن‌ها را در پاسخ‌های چت‌بات فراخوانی کنید. این ویژگی برای اجرای عملیات‌های خاص مانند تحلیل داده‌های مالی یا دریافت اطلاعات از منابع خارجی بسیار کاربردی است.

#### 1.1.2. پشتیبانی از LangChain.js

یکی از مهم‌ترین دلایل انتخاب **Chatbot UI** برای پروژه شما، پشتیبانی آن از **LangChain.js** است . LangChain.js یک کتابخانه قدرتمند برای ساخت برنامه‌های کاربردی با استفاده از مدل‌های زبانی است. با استفاده از LangChain.js، می‌توانید به راحتی منطق پیچیده چت‌بات خود را در فرانت‌اند پیاده‌سازی کنید. برای مثال، می‌توانید از **PromptTemplate** برای ایجاد پرامپت‌های پویا استفاده کنید، یا از **LLMChain** برای ایجاد زنجیره‌هایی از مدل‌های زبانی و پرامپت‌ها بهره ببرید . این ویژگی به شما این امکان را می‌دهد تا منطق چت‌بات خود را به صورت ماژولار و قابل نگهداری طراحی کنید. همچنین، با استفاده از LangChain.js، می‌توانید به راحتی با بک‌اند Django که از LangChain استفاده می‌کند ارتباط برقرار کنید. برای مثال، می‌توانید درخواست‌های کاربر را از طریق API به بک‌اند ارسال کرده و پاسخ‌های تولید شده توسط LangChain در بک‌اند را دریافت کنید. این یکپارچه‌سازی به شما این امکان را می‌دهد تا از قدرت پردازش Django در بک‌اند و انعطاف‌پذیری React در فرانت‌اند بهره‌مند شوید.

#### 1.1.3. قابلیت شخصی‌سازی برای نمایش محتوای غنی

کتابخانه **Chatbot UI** به دلیل طراحی ماژولار و قابلیت شخصی‌سازی بالا، به شما این امکان را می‌دهد که به راحتی رابط کاربری چت‌بات را برای نمایش محتوای غنی مانند جداول، نمودارها و ترازهای حسابداری تغییر دهید. این کتابخانه از **Markdown** پشتیبانی می‌کند، که به شما این امکان را می‌دهد تا محتوای قالب‌بندی شده مانند جداول، لیست‌ها و کدهای برنامه‌نویسی را در پاسخ‌های چت‌بات نمایش دهید . برای نمایش نمودارها، می‌توانید از کتابخانه‌های نمودارسازی React مانند **Chart.js** یا **react-financial-charts** استفاده کنید . برای مثال، می‌توانید یک کامپوننت React برای نمایش نمودارهای مالی ایجاد کرده و آن را در پاسخ‌های چت‌بات قرار دهید. همچنین، می‌توانید از **function calling** برای فراخوانی توابعی که داده‌های مالی را دریافت کرده و آن‌ها را به صورت نمودار یا جدول نمایش می‌دهند، استفاده کنید. این قابلیت به شما این امکان را می‌دهد تا یک تجربه کاربری غنی و تعاملی برای کاربران خود ایجاد کنید.

### 1.2. کتابخانه Backend: django-ai-assistant

برای بک‌اند پروژه شما، کتابخانه **django-ai-assistant** یکی از بهترین گزینه‌هاست. این کتابخانه به صورت متن‌باز در دسترس است و به طور خاص برای یکپارچه‌سازی دستیارهای هوشمند با Django طراحی شده است . این کتابخانه به شما این امکان را می‌دهد تا به راحتی دستیارهای هوشمند را در برنامه‌های Django خود ادغام کرده و از قدرت مدل‌های زبانی برای ایجاد برنامه‌های هوشمند بهره‌مند شوید. با استفاده از این کتابخانه، می‌توانید به راحتی APIهای RESTful ایجاد کرده و آن‌ها را با فرانت‌اند React خود یکپارچه کنید. همچنین، این کتابخانه از LangChain پشتیبانی می‌کند، که به شما این امکان را می‌دهد تا منطق پیچیده چت‌بات خود را در بک‌اند پیاده‌سازی کنید.

#### 1.2.1. معرفی و ویژگی‌ها

کتابخانه **django-ai-assistant** یک کتابخانه Python است که به شما این امکان را می‌دهد تا دستیارهای هوشمند را در برنامه‌های Django خود ادغام کنید . این کتابخانه به شما این امکان را می‌دهد تا به راحتی APIهای RESTful ایجاد کرده و آن‌ها را با فرانت‌اند React خود یکپارچه کنید. یکی از مهم‌ترین ویژگی‌های این کتابخانه، پشتیبانی از **LangChain** است، که به شما این امکان را می‌دهد تا منطق پیچیده چت‌بات خود را در بک‌اند پیاده‌سازی کنید. همچنین، این کتابخانه از **Django REST Framework** استفاده می‌کند، که یکی از محبوب‌ترین کتابخانه‌ها برای ایجاد APIهای RESTful در Django است. با استفاده از این کتابخانه، می‌توانید به راحتی مدل‌های داده‌ای برای ذخیره‌سازی اطلاعات چت‌بات ایجاد کرده و آن‌ها را در دیتابیس Django ذخیره کنید. این ویژگی به شما این امکان را می‌دهد تا تاریخچه مکالمات کاربران را ذخیره کرده و از آن برای بهبود عملکرد چت‌بات استفاده کنید.

#### 1.2.2. یکپارچه‌سازی با LangChain

یکی از مهم‌ترین دلایل انتخاب **django-ai-assistant** برای پروژه شما، پشتیبانی آن از **LangChain** است. LangChain یک کتابخانه قدرتمند برای ساخت برنامه‌های کاربردی با استفاده از مدل‌های زبانی است. با استفاده از LangChain، می‌توانید به راحتی منطق پیچیده چت‌بات خود را در بک‌اند پیاده‌سازی کنید. برای مثال، می‌توانید از **Agents** برای ایجاد چت‌بات‌هایی که می‌توانند با دنیای خارج تعامل داشته باشند، استفاده کنید. همچنین، می‌توانید از **Chains** برای ایجاد زنجیره‌هایی از مدل‌های زبانی و پرامپت‌ها بهره ببرید. این ویژگی به شما این امکان را می‌دهد تا منطق چت‌بات خود را به صورت ماژولار و قابل نگهداری طراحی کنید. همچنین، با استفاده از LangChain، می‌توانید به راحتی با فرانت‌اند React که از LangChain.js استفاده می‌کند ارتباط برقرار کنید. برای مثال، می‌توانید درخواست‌های کاربر را از طریق API دریافت کرده و آن‌ها را به LangChain در بک‌اند ارسال کنید. سپس، پاسخ‌های تولید شده توسط LangChain را به فرانت‌اند ارسال کنید.

#### 1.2.3. ایجاد API برای ارتباط با Frontend

کتابخانه **django-ai-assistant** به شما این امکان را می‌دهد تا به راحتی APIهای RESTful برای ارتباط با فرانت‌اند React ایجاد کنید. این کتابخانه از **Django REST Framework** استفاده می‌کند، که یکی از محبوب‌ترین کتابخانه‌ها برای ایجاد APIهای RESTful در Django است . با استفاده از این کتابخانه، می‌توانید endpointهایی برای دریافت پیام‌های کاربر، ارسال پاسخ‌های چت‌بات، و ذخیره‌سازی تاریخچه مکالمات ایجاد کنید. همچنین، می‌توانید از **Token Authentication** برای احراز هویت کاربران استفاده کنید . این ویژگی به شما این امکان را می‌دهد تا دسترسی به APIهای خود را محدود کرده و امنیت برنامه خود را افزایش دهید. برای ارتباط با فرانت‌اند React، می‌توانید از کتابخانه **Axios** استفاده کنید . Axios یک کتابخانه محبوب برای ارسال درخواست‌های HTTP در JavaScript است. با استفاده از Axios، می‌توانید به راحتی درخواست‌هایی را به APIهای Django ارسال کرده و پاسخ‌های دریافتی را در فرانت‌اند پردازش کنید.

### 1.3. استراتژی یکپارچه‌سازی

برای یکپارچه‌سازی موفق بین فرانت‌اند React و بک‌اند Django، استفاده از یک استراتژی منسجم و ساختاریافته ضروری است. این استراتژی باید شامل تعریف یک قرارداد واضح برای ارتباط بین دو بخش، استفاده از فناوری‌های مناسب برای تبادل داده، و طراحی یک معماری قابل توسعه و نگهداری باشد. در این بخش، ما به بررسی جزئیات این استراتژی خواهیم پرداخت، از جمله نحوه ارتباط Frontend و Backend از طریق REST API، پردازش درخواست‌ها در Django با استفاده از LangChain، و ارسال پاسخ‌های متنوع (متن، جدول، نمودار) به Frontend.

#### 1.3.1. ارتباط Frontend و Backend از طریق REST API

بهترین روش برای ارتباط بین فرانت‌اند React و بک‌اند Django، استفاده از **REST API** است. REST API یک معماری سبک و مقیاس‌پذیر برای ایجاد خدمات وب است که امکان تبادل داده بین سیستم‌های مختلف را فراهم می‌کند. در این روش، فرانت‌اند React به عنوان یک مشتری (Client) عمل می‌کند که درخواست‌هایی را به بک‌اند Django (Server) ارسال می‌کند. بک‌اند Django نیز پس از پردازش درخواست، پاسخی را به فرانت‌اند ارسال می‌کند. برای ایجاد APIهای RESTful در Django، می‌توانید از کتابخانه **Django REST Framework** استفاده کنید . این کتابخانه ابزارهای قدرتمندی برای سریال‌سازی و دسریال‌سازی داده‌ها، مدیریت احراز هویت، و تعریف endpointهای API فراهم می‌کند. در سمت فرانت‌اند، می‌توانید از کتابخانه **Axios** برای ارسال درخواست‌های HTTP به APIهای Django استفاده کنید . Axios یک کتابخانه محبوب و قدرتمند برای ارسال درخواست‌های asynchronous در JavaScript است.

#### 1.3.2. پردازش درخواست‌ها در Django با LangChain

پس از دریافت درخواست از فرانت‌اند، بک‌اند Django باید آن را پردازش کند. برای این منظور، می‌توانید از کتابخانه **LangChain** استفاده کنید. LangChain یک چارچوب قدرتمند برای ساخت برنامه‌های کاربردی با استفاده از مدل‌های زبانی است. با استفاده از LangChain، می‌توانید منطق پیچیده چت‌بات خود را در بک‌اند پیاده‌سازی کنید. برای مثال، می‌توانید از **Agents** برای ایجاد چت‌بات‌هایی که می‌توانند با دنیای خارج تعامل داشته باشند، استفاده کنید. همچنین، می‌توانید از **Chains** برای ایجاد زنجیره‌هایی از مدل‌های زبانی و پرامپت‌ها بهره ببرید. این ویژگی به شما این امکان را می‌دهد تا منطق چت‌بات خود را به صورت ماژولار و قابل نگهداری طراحی کنید. همچنین، با استفاده از LangChain، می‌توانید به راحتی با فرانت‌اند React که از LangChain.js استفاده می‌کند ارتباط برقرار کنید. برای مثال، می‌توانید درخواست‌های کاربر را از طریق API دریافت کرده و آن‌ها را به LangChain در بک‌اند ارسال کنید. سپس، پاسخ‌های تولید شده توسط LangChain را به فرانت‌اند ارسال کنید.

#### 1.3.3. ارسال پاسخ‌ها (متن، جدول، نمودار) به Frontend

پس از پردازش درخواست کاربر در بک‌اند Django، نوبت به ارسال پاسخ به فرانت‌اند React می‌رسد. پاسخ‌های چت‌بات می‌توانند در قالب‌های مختلفی مانند متن ساده، جداول، یا نمودارها باشند. برای ارسال این پاسخ‌ها، می‌توانید از **JSON** استفاده کنید. JSON یک فرمت سبک و مناسب برای تبادل داده بین سیستم‌های مختلف است. برای مثال، می‌توانید یک ساختار JSON مانند زیر برای ارسال پاسخ‌ها تعریف کنید:

```json
{
  "type": "table",
  "data": [
    ["سرفصل", "بدهکار", "بستانکار"],
    ["دارایی", "1000000", "0"],
    ["بدهی", "0", "500000"],
    ["سرمایه", "0", "500000"]
  ]
}
```

در این ساختار، فیلد `type` نوع پاسخ (متن، جدول، یا نمودار) را مشخص می‌کند و فیلد `data` داده‌های مربوط به پاسخ را حمل می‌کند. در سمت فرانت‌اند React، می‌توانید با توجه به مقدار فیلد `type`، کامپوننت مناسبی را برای نمایش پاسخ رندر کنید. برای مثال، اگر مقدار `type` برابر با `table` باشد، می‌توانید یک کامپوننت React برای نمایش جدول رندر کنید. این روش به شما این امکان را می‌دهد تا به راحتی محتوای غنی را در رابط کاربری چت‌بات نمایش دهید.

## 2. بررسی جایگزین‌ها و گزینه‌های دیگر

در کنار ترکیب پیشنهادی Chatbot UI و django-ai-assistant، گزینه‌های دیگری نیز وجود دارند که ممکن است برای پروژه شما مناسب باشند. این گزینه‌ها شامل کتابخانه‌های UI React دیگر، پروژه‌های نمونه و تمپلیت‌های آماده هستند. در ادامه، برخی از این گزینه‌ها بررسی خواهند شد.

### 2.1. کتابخانه‌های UI React

در کنار Chatbot UI، کتابخانه‌های UI React دیگری نیز وجود دارند که می‌توانند برای ساخت رابط کاربری چت‌بات استفاده شوند. این کتابخانه‌ها معمولاً کامپوننت‌های آماده‌ای برای ساخت چت‌بات ارائه می‌دهند که می‌توانند روند توسعه را سریع‌تر کنند.

#### 2.1.1. Shadcn UI AI Chatbot

کامپوننت AI Chatbot از مجموعه Shadcn UI یک رابط کاربری مدرن و کاملاً واکنش‌گرا برای پیاده‌سازی چت‌بات‌های هوش مصنوعی ارائه می‌دهد که طراحی آن به‌طور مشخص از رابط کاربری ChatGPT الهام گرفته شده است. این کامپوننت به‌صورت یک بلوک (Block) در دسترس است، به این معنا که مجموعه‌ای از چندین کامپوننت کوچک‌تر است که با هم یک رابط کاربری کامل برای چت را تشکیل می‌دهند. این رویکرد ماژولار به توسعه‌دهندگان اجازه می‌دهد تا به‌راحتی بخش‌های مختلف رابط کاربری را سفارشی‌سازی یا جایگزین کنند. از جمله ویژگی‌های کلیدی این کامپوننت می‌توان به مدیریت خودکار وضعیت پیام‌ها، رفتار اسکرول هوشمند (اسکرول خودکار به آخرین پیام و کنترل اسکرول دستی)، هماهنگ‌سازی استریمینگ پاسخ‌های AI با وضعیت ورودی کاربر، و ذخیره‌سازی ترجیحات کاربر (مانند مدل انتخاب‌شده) در localStorage اشاره کرد . این ویژگی‌ها باعث می‌شوند که این کامپوننت یک گزینه بسیار مناسب برای پروژه‌هایی باشد که به دنبال یک رابط کاربری پیشرفته و در عین حال قابل انعطاف هستند.

#### 2.1.2. Assistant-UI

کتابخانه Assistant-UI یک مجموعه کامپوننت React دیگر برای ساخت رابط‌های چت هوش مصنوعی است که به‌طور خاص برای یکپارچه‌سازی با LangChain و Vercel AI SDK طراحی شده است. این کتابخانه از طیف وسیعی از ارائه‌دهندگان مدل‌های زبانی (LLM) مانند OpenAI، Anthropic، Mistral، Google Gemini و حتی AWS Bedrock پشتیبانی می‌کند . این ویژگی برای پروژه شما که قرار است از LangChain در بک‌اند استفاده کند، بسیار ارزشمند است، زیرا می‌تواند ارتباط بین فرانت‌اند و بک‌اند را ساده‌تر کند. Assistant-UI همچنین از `shadcn-ui`، `react-markdown` و `react-syntax-highlighter` برای نمایش پیام‌های فرمت‌شده استفاده می‌کند، که برای نمایش کدهای حسابداری یا فرمول‌های مالی در پاسخ‌های چت‌بات مفید خواهد بود .

#### 2.1.3. NLUX React

NLUX یک کتابخانه جاوااسکریپت متن‌باز است که یکپارچه‌سازی مدل‌های زبانی بزرگ (LLM) مانند ChatGPT را در برنامه‌های وب آسان می‌کند. این کتابخانه کامپوننت‌ها و هوک‌های React ارائه می‌دهد که می‌توانند برای ساخت رابط‌های کاربری چت‌بات استفاده شوند. یکی از ویژگی‌های کلیدی NLUX، پشتیبانی از آداپترهای مختلف LLM از جمله LangChain است. این ویژگی به شما امکان می‌دهد تا به‌راحتی چت‌بات خود را به بک‌اند Django که از LangChain استفاده می‌کند، متصل کنید. همچنین، NLUX از پخش زنده پاسخ‌ها و شخصی‌سازی تم پشتیبانی می‌کند.

### 2.2. پروژه‌های نمونه و تمپلیت‌ها

برای تسریع روند توسعه، بررسی پروژه‌های نمونه و تمپلیت‌های آماده که از ترکیب Django و React استفاده می‌کنند، می‌تواند بسیار مفید باشد. این پروژه‌ها معمولاً ساختار پروژه، نحوه ارتباط بین فرانت‌اند و بک‌اند، و پیاده‌سازی ویژگی‌های رایج مانند احراز هویت و مدیریت وضعیت را به شما نشان می‌دهند.

#### 2.2.1. langchain-chatbot-react-app

پروژه `langchain-chatbot-react-app` یک کتابخانه React است که به شما امکان می‌دهد تا یک چت‌بات با استفاده از LangChain بسازید. این کتابخانه به صورت یک پکیج NPM در دسترس است و می‌تواند به راحتی در پروژه‌های React نصب شود. همچنین، یک نسخه UMD نیز ارائه می‌دهد که می‌تواند به صورت مستقیم در فایل‌های HTML استفاده شود. این کتابخانه با استفاده از React و TypeScript ساخته شده است و از LangChain برای پردازش زبان طبیعی استفاده می‌کند. این کتابخانه چندین حالت چت را پشتیبانی می‌کند، از جمله چت ساده، چت با حافظه و چت با ابزارها. این ویژگی برای پروژه شما که نیاز به راهنمایی کاربران در فرآیندهای حسابرسی دارد، بسیار مفید خواهد بود. می‌توانید از حالت چت با ابزارها برای ساخت agentهایی استفاده کنید که بتوانند وظایف خاصی را انجام دهند، مانند تحلیل داده‌های مالی و پاسخ به سوالات متداول حسابرسی .

#### 2.2.2. پروژه‌های Django-React ترکیبی (مثال: virattt/chat_app)

پروژه‌های ترکیبی Django-React می‌توانند نقطه شروع خوبی برای پروژه شما باشند. این پروژه‌ها معمولاً یک بک‌اند Django و یک فرانت‌اند React دارند که از قبل با هم یکپارچه شده‌اند. این می‌تواند زمان راه‌اندازی پروژه را کاهش دهد و به شما اجازه می‌دهد تا سریع‌تر شروع به توسعه کنید. یکی از پروژه‌های ترکیبی Django-React که می‌تواند برای پروژه شما مفید باشد، `virattt/chat_app` است. این پروژه یک چت‌بات است که با استفاده از Django، React و LangChain ساخته شده است. این پروژه به شما نشان می‌دهد که چگونه می‌توانید یک چت‌بات با استفاده از این فناوری‌ها بسازید. می‌توانید از این پروژه به عنوان نقطه شروع خود استفاده کنید و آن را با توجه به نیازهای خاص خود سفارشی‌سازی کنید .

#### 2.2.3. تمپلیت‌های Next.js (مثال: Shadcn Chatbot Kit)

تمپلیت‌های Next.js می‌توانند نقطه شروع خوبی برای پروژه شما باشند. این تمپلیت‌ها معمولاً یک پروژه Next.js با تمام تنظیمات لازم دارند که می‌تواند زمان راه‌اندازی پروژه را کاهش دهد. یکی از تمپلیت‌های Next.js که می‌تواند برای پروژه شما مفید باشد، **"Shadcn Chatbot Kit"** است. این تمپلیت یک پروژه Next.js است که از Shadcn UI برای ساخت رابط کاربری چت‌بات استفاده می‌کند. این تمپلیت به شما نشان می‌دهد که چگونه می‌توانید یک چت‌بات با استفاده از Next.js و Shadcn UI بسازید. می‌توانید از این تمپلیت به عنوان نقطه شروع خود استفاده کنید و آن را با توجه به نیازهای خاص خود سفارشی‌سازی کنید .

### 2.3. چالش‌های استفاده از Chatbot-UI نسخه اصلی

پروژه `chatbot-ui` یکی از محبوب‌ترین و کامل‌ترین تمپلیت‌های متن‌باز برای ساخت رابط‌های چت شبیه به ChatGPT است. با این حال، همانطور که در تجربه شخصی شما نیز مشخص شده است، استفاده از نسخه اصلی این پروژه برای پروژه‌ای با بک‌اند Django می‌تواند با چالش‌های قابل توجهی همراه باشد. این چالش‌ها عمدتاً ناشی از وابستگی‌های سنگین این پروژه به یک اکوسیستم خاص هستند که جایگزینی آن‌ها با Django کار ساده‌ای نیست.

#### 2.3.1. وابستگی به Supabase

یکی از اصلی‌ترین چالش‌هایی که در استفاده از نسخه اصلی `chatbot-ui` وجود دارد، وابستگی سنگین آن به **Supabase** برای مدیریت بک‌اند است. Supabase یک پلتفرم Backend-as-a-Service (BaaS) است که مجموعه‌ای از ابزارها از جمله پایگاه‌داده PostgreSQL، احراز هویت، ذخیره‌سازی و Edge Functions را ارائه می‌دهد. در حالی که Supabase یک ابزار قدرتمند است، اما اگر پروژه شما الزامات خاصی دارد که باید با Django پیاده‌سازی شوند (مانند ادغام با سیستم‌های حسابداری داخلی یا استفاده از کتابخانه‌های Python خاص)، جایگزینی Supabase با Django می‌تواند بسیار پیچیده و زمان‌بر باشد. کدهای `chatbot-ui` به‌طور گسترده از توابع و هوک‌های Supabase برای مدیریت وضعیت کاربر، ذخیره تاریخچه چت و احراز هویت استفاده می‌کند. این بدان معناست که برای مهاجرت به Django، باید تمام این وابستگی‌ها را شناسایی کرده و آن‌ها را با APIهای سفارشی که توسط Django REST Framework ایجاد شده‌اند، جایگزین کنید.

#### 2.3.2. سختی جایگزینی Backend با Django

جایگزینی بک‌اند Supabase با Django در پروژه‌ای مانند `chatbot-ui` صرفاً به بازنویسی چند خط کد محدود نمی‌شود، بلکه نیاز به یک تغییر معماری اساسی دارد. Supabase یک راه‌حل all-in-one است که پایگاه‌داده، احراز هویت، و Edge Functions را در یک پکیج واحد ارائه می‌دهد. در مقابل، Django یک فریم‌ورک کامل‌تر و انعطاف‌پذیرتر است که به شما اجازه می‌دهد هر یک از این اجزا را به‌صورت جداگانه و با استفاده از بهترین کتابخانه‌های Python طراحی و پیاده‌سازی کنید. برای مثال، برای جایگزینی سیستم احراز هویت Supabase، باید از کتابخانه‌هایی مانند `django-allauth` یا `dj-rest-auth` استفاده کنید. برای ذخیره‌سازی تاریخچه چت، باید مدل‌های Django را تعریف کرده و APIهایی برای ایجاد، خواندن و به‌روزرسانی این مدل‌ها ایجاد کنید.

## 3. راهنمای پیاده‌سازی و توسعه

در این بخش، یک راهنمای گام‌به‌گام برای پیاده‌سازی چت‌بات حسابرسی با استفاده از ترکیب پیشنهادی Chatbot UI و django-ai-assistant ارائه می‌شود. این راهنما به شما کمک می‌کند تا پروژه خود را از ابتدا راه‌اندازی کرده و ویژگی‌های مورد نظر را به آن اضافه کنید.

### 3.1. راه‌اندازی Backend با django-ai-assistant

#### 3.1.1. نصب و پیکربندی کتابخانه

برای شروع، باید کتابخانه `django-ai-assistant` را در پروژه Django خود نصب کنید. این کار را می‌توانید با استفاده از pip انجام دهید:

```bash
pip install django-ai-assistant
```

سپس، باید این کتابخانه را به لیست `INSTALLED_APPS` در فایل `settings.py` پروژه Django خود اضافه کنید:

```python
INSTALLED_APPS = [
    # ...
    'django_ai_assistant',
    # ...
]
```

پس از اضافه کردن اپلیکیشن، باید مهاجرت‌های دیتابیس را اجرا کنید تا جدول‌های مورد نیاز ایجاد شوند:

```bash
python manage.py migrate
```

#### 3.1.2. تعریف Agentها و Tools برای LangChain

یکی از مزایای اصلی استفاده از LangChain، امکان تعریف **Agentها** و **Tools** برای انجام وظایف خاص است. برای پروژه حسابرسی شما، می‌توانید Tools مختلفی تعریف کنید. برای مثال، یک Tool برای تحلیل داده‌های مالی، یک Tool برای پاسخ به سوالات متداول حسابرسی و یک Tool برای راهنمایی در فرآیندهای حسابرسی. این Tools باید به‌صورت توابع پایتون تعریف شوند که ورودی‌های خاصی را دریافت کرده و خروجی‌های مشخصی را بازمی‌گردانند. سپس، می‌توانید یک Agent تعریف کنید که با استفاده از این Tools، تصمیم‌گیری کرده و پاسخ نهایی را تولید کند.

#### 3.1.3. ایجاد Endpointهای API برای دریافت و ارسال پیام‌ها

کتابخانه `django-ai-assistant` به‌طور خودکار APIهای RESTful را برای ارتباط با فرانت‌اند ایجاد می‌کند. با این حال، ممکن است نیاز داشته باشید که endpointهای سفارشی خود را نیز تعریف کنید. برای مثال، می‌توانید یک endpoint برای آپلود فایل‌های Excel تعریف کنید. این endpoint باید فایل را دریافت کرده، آن را ذخیره کند و سپس داده‌های آن را برای پردازش به LangChain ارسال نماید. برای ایجاد این endpointها، می‌توانید از Django REST Framework استفاده کنید و ViewSetهایی تعریف کنید که درخواست‌های HTTP را مدیریت می‌کنند.

### 3.2. راه‌اندازی Frontend با Chatbot UI

#### 3.2.1. نصب و راه‌اندازی پروژه React

برای راه‌اندازی پروژه React، می‌توانید از ابزارهایی مانند Create React App یا Vite استفاده کنید. پس از ایجاد پروژه، باید کتابخانه‌های مورد نیاز مانند `axios` را برای ارتباط با بک‌اند نصب کنید:

```bash
npm install axios
```

سپس، می‌توانید کدهای مربوط به Chatbot UI را در پروژه خود قرار دهید. این کدها معمولاً شامل کامپوننت‌های React، هوک‌ها و فایل‌های پیکربندی هستند.

#### 3.2.2. اتصال Chatbot UI به APIهای Django

برای اتصال Chatbot UI به بک‌اند Django، باید منطق ارسال و دریافت پیام‌ها را در کامپوننت اصلی چت‌بات پیاده‌سازی کنید. این کار معمولاً با استفاده از هوک `useChat` یا یک هوک سفارشی انجام می‌شود. در این هوک، باید از `axios` برای ارسال درخواست POST به endpoint `/api/chat/` در Django استفاده کنید. این درخواست باید شامل پیام کاربر و اطلاعات مربوط به مکالمه باشد. پس از دریافت پاسخ از بک‌اند، باید آن را در وضعیت مکالمه ذخیره کرده و در رابط کاربری نمایش دهید.

#### 3.2.3. شخصی‌سازی Theme و ظاهر رابط کاربری

یکی از مزایای اصلی استفاده از Chatbot UI و Tailwind CSS، امکان شخصی‌سازی آسان ظاهر رابط کاربری است. شما می‌توانید با تغییر متغیرهای CSS یا بازنویسی کلاس‌های Tailwind، تم رنگی، فونت‌ها و سایر عناصر بصری را تغییر دهید. همچنین، می‌توانید کامپوننت‌های React را بازنویسی کنید تا ساختار و چیدمان آن‌ها را تغییر دهید. این کار به شما امکان می‌دهد تا رابط کاربری چت‌بات را دقیقاً مطابق با برند و طراحی کلی برنامه خود طراحی کنید.

### 3.3. نمایش محتوای غنی (جدول‌ها و نمودارها)

#### 3.3.1. طراحی ساختار JSON برای خروجی‌های مختلف

برای نمایش محتوای غنی، باید یک ساختار JSON استاندارد برای خروجی‌های مختلف تعریف کنید. این ساختار باید شامل یک فیلد `type` برای مشخص کردن نوع محتوا (مثلاً `text`، `table`، `chart`) و یک فیلد `data` برای حمل داده‌های مربوطه باشد. برای مثال، برای یک جدول، `data` می‌تواند یک آرایه‌ای از آرایه‌ها باشد که هر آرایه داخلی نماینده یک سطر در جدول است. برای یک نمودار، `data` می‌تواند یک شیء باشد که شامل تنظیمات نمودار مانند نوع نمودار، برچسب‌ها و مقادیر باشد.

#### 3.3.2. ایجاد کامپوننت‌های React برای رندر جدول و نمودار

پس از تعریف ساختار JSON، باید کامپوننت‌های React ایجاد کنید که قادر به رندر این داده‌ها باشند. برای مثال، می‌توانید یک کامپوننت `CustomTable` ایجاد کنید که یک آرایه‌ای از آرایه‌ها را دریافت کرده و آن را به‌صورت یک جدول HTML نمایش می‌دهد. همچنین، می‌توانید یک کامپوننت `CustomChart` ایجاد کنید که داده‌های نمودار را دریافت کرده و با استفاده از یک کتابخانه نمودارسازی، آن را رندر می‌کند.

#### 3.3.3. استفاده از کتابخانه‌های نمودارسازی (مثلاً Plotly.js)

برای رسم نمودارها، می‌توانید از کتابخانه‌های نمودارسازی محبوب React مانند **Plotly.js**، **Chart.js** یا **Recharts** استفاده کنید. این کتابخانه‌ها به شما امکان می‌دهند تا انواع مختلفی از نمودارها مانند نمودارهای خطی، میله‌ای، دایره‌ای و ... را ایجاد کنید. پس از نصب کتابخانه مورد نظر، باید آن را در کامپوننت `CustomChart` خود ایمپورت کرده و از آن برای رندر نمودار استفاده کنید.

### 3.4. پردازش فایل‌های Excel

#### 3.4.1. ایجاد API برای دریافت و ذخیره فایل

برای دریافت فایل‌های Excel از کاربر، باید یک API در Django ایجاد کنید. این API باید یک endpoint POST داشته باشد که فایل را دریافت کرده و آن را در سرور ذخیره کند. برای این کار، می‌توانید از `MultiPartParser` در Django REST Framework استفاده کنید. پس از ذخیره فایل، باید مسیر آن را برای پردازش به مرحله بعد ارسال کنید.

#### 3.4.2. استفاده از کتابخانه‌های Python برای خواندن داده‌های Excel

برای خواندن داده‌های فایل‌های Excel، می‌توانید از کتابخانه‌های Python مانند **Pandas** یا **openpyxl** استفاده کنید. این کتابخانه‌ها به شما امکان می‌دهند تا به‌راحتی فایل‌های Excel را بارگذاری کرده و داده‌های آن‌ها را به‌صورت DataFrame یا ساختارهای داده دیگر استخراج کنید.

#### 3.4.3. ارسال داده‌های استخراج‌شده به LangChain برای تحلیل

پس از استخراج داده‌ها از فایل Excel، باید آن‌ها را به LangChain ارسال کنید تا تحلیل شوند. این کار را می‌توانید با تعریف یک Tool در LangChain انجام دهید. این Tool باید داده‌های استخراج‌شده را دریافت کرده و بر اساس درخواست کاربر، تحلیل مناسبی را بر روی آن‌ها انجام دهد. برای مثال، می‌تواند جمع کل ستون‌ها را محاسبه کند، میانگین را پیدا کند یا نموداری از داده‌ها تولید کند. نتیجه این تحلیل سپس به‌صورت یک ساختار JSON به فرانت‌اند ارسال می‌شود تا نمایش داده شود.