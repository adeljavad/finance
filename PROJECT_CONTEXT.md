# PROJECT_CONTEXT: Financial AI Assistant

## ๐ ุฏุณุชูุฑุงูุนูู ุจุฑุง Cline
**ูุจู ุงุฒ ุดุฑูุน ูุฑ taskุ ุงู ูุงู ุฑุง ฺฉุงูู ุจุฎูุงูุฏ ุชุง ูุถุนุช ูุนู ู ุงูููุชโูุง ูพุฑูฺู ุฑุง ุฏุฑฺฉ ฺฉูุฏ.**

## ๐ฏ ุงูุฏุงู ุงุตู ูพุฑูฺู
- ุฏุณุชุงุฑ ููุดููุฏ ุชุฎุตุต ุจุฑุง ุญุณุงุจุฏุงุฑุงู ู ุญุณุงุจุฑุณุงู
- ุชุฑฺฉุจ ููุงูู ุญุณุงุจุฏุงุฑ ูุงุนุฏูโุจูุงุฏ + ููุด ูุตููุน (DeepSeek + Scikit-learn)
- ุชุญูู ุฎูุฏฺฉุงุฑ ุตูุฑุชโูุง ูุงู ู ุดูุงุณุง ุฑุณฺฉ
- ฺฉุงูุด ทฐูช ุฒูุงู ุชุญูู ุฏุณุช ู ุงูุฒุงุด ุฏูุช ุจู นตูช
- **ุณุงุฒฺฏุงุฑ ฺฉุงูู ุจุง ุงุณุชุงูุฏุงุฑุฏูุง ุญุณุงุจุฏุงุฑ ุงุฑุงู**

## ๐๏ธ ูุนูุงุฑ ูู ฺฉูพุงุฑฺู
- **Backend**: Django 4.2+ (ูุงุฒ ุจู ุงุฑุชูุงุก ุงุฒ 2.1.15)
- **Database**: SQL Server (ุงุตู) + SQLite (ุชูุณุนู)
- **AI Engine**: LangChain + DeepSeek API + Scikit-learn
- **Frontend**: Django Templates + HTML/CSS/JS + Bootstrap
- **Authentication**: Google OAuth + django-allauth
- **Data Processing**: Pandas + Openpyxl + xlrd
- **Multi-tenancy**: ูพุดุชุจุงู ฺูุฏุดุฑฺฉุช ฺฉุงูู

## ๐ ูุถุนุช ูพุดุฑูุช
- **ุชฺฉูู ุดุฏู**: ฑฐฐ ุชุณฺฉ ุงุฒ ฑฐฐ ุชุณฺฉ (ฑฐฐูช) โ
- **ุณุณุชู ฺฉุงูู**: ุชูุงู ูุงุฒูุง ฑ-ถ ุจุง ููููุช ูพุงุฏูโุณุงุฒ ุดุฏ
- **ุขูุงุฏู ุชููุฏ**: ุณุณุชู ูุงุฏุฑ ุจู ุชุญูู ูุงู ููุดููุฏ ุงุณุช
- **ุงุฑุชูุงุก ุฌุฏุฏ**: ุณุณุชู ุฏุณุชุงุฑ ูุงู ุจุง ูุนูุงุฑ ูพุดุฑูุชู ูพุงุฏูโุณุงุฒ ุดุฏ

## ๐ ุณุงุฎุชุงุฑ ูพุฑูฺู (ุฏุงุฑฺฉุชูุฑโูุง)

finance/
โโโ chatbot/              # ุงูพูฺฉุดู ฺุชโุจุงุช (itapp)
โโโ coding_manager/       # ูุฏุฑุช ฺฉุฏูฺฏ ูุงู
โโโ data_importer/        # ุงููพูุฑุช ู ุงุนุชุจุงุฑุณูุฌ ุฏุงุฏู
โโโ financial_system/     # ุณุณุชู ุงุตู ุชุญูู ูุงู
โโโ users/               # ุงุญุฑุงุฒ ููุช ู ูุฏุฑุช ุดุฑฺฉุชโูุง
โโโ Data/               # ุฏุงุฏูโูุง ููููู ู ุชุณุช
โโโ Doc/               # ูุณุชูุฏุงุช ูู ู ฺฉุงุฑุจุฑ
โโโ templates/         # ุชููพูุชโูุง Django


## ๐ ุงูพูฺฉุดูโูุง ุงุตู

### 1. **users** (ฑฐฐูช ุชฺฉูู) โ
- **Models**: CustomUser, Company, FinancialPeriod, UserCompanyRole, CompanyInvitation
- **ูุธูู**: ุงุญุฑุงุฒ ููุช ฺูุฏุดุฑฺฉุชุ ุฏุนูุช ฺฉุงุฑุจุฑุงูุ RBAC
- **ูฺฺฏโูุง**: ูุฏุฑุช ฺฉุงูู ุดุฑฺฉุชโูุงุ ุฏูุฑูโูุง ูุงูุ ุฑุงุจุท ฺฉุงุฑุจุฑ ูุงุฑุณ

### 2. **financial_system** (ฑฐฐูช ุชฺฉูู) โ
- **Models**: DocumentHeader, DocumentItem, ChartOfAccounts, AnalysisResult, ChatLog
- **Analyzers**: CurrentAssets, CurrentLiabilities, Equity, BalanceSheet, CashBank
- **ูุธูู**: ูุณุชู ุชุญูู ูุงู ู ูุญุงุณุจุงุช
- **ูฺฺฏโูุง**: ฺุช ููุดููุฏ ูุงูุ ุชุญููโฺฏุฑูุง ูพุดุฑูุชูุ ฺฏุฒุงุฑุดโูุง ุญุฑููโุง

### 3. **data_importer** (ฑฐฐูช ุชฺฉูู) โ
- **Features**: ุชุดุฎุต ุชฺฉุฑุงุฑโูุงุ ฺฉูุชุฑู ุชูุงูุ Audit Trailุ ุงุนุชุจุงุฑุณูุฌ ูพุดุฑูุชู
- **ูุธูู**: ุงููพูุฑุช ุงฺฉุณู ู ุงุนุชุจุงุฑุณูุฌ ฺฉูุช ุฏุงุฏู
- **ูฺฺฏโูุง**: ุขูุงูุงุฒุฑ ุณุงุฎุชุงุฑ ุงฺฉุณูุ ุงุฏุชูุฑ ุขููุงูุ ุณุณุชู ฺฏุฒุงุฑุดโฺฏุฑ

### 4. **coding_manager** (ฑฐฐูช ุชฺฉูู) โ
- **Extractors**: Hierarchical, Intelligent
- **ูุธูู**: ุงุณุชุฎุฑุงุฌ ุฎูุฏฺฉุงุฑ ุณุทูุญ ฺฉุฏูฺฏ (ฺฉู/ูุนู/ุชูุตู)
- **ูฺฺฏโูุง**: ุงุณุชุฎุฑุงุฌ ุณูุณููโูุฑุงุชุจุ ูุฏุฑุช ฺฉุฏูฺฏ ููุดููุฏ

### 5. **chatbot** (ฑฐฐูช ุชฺฉูู) โ
- **Integration**: LangChain + DeepSeek + FinancialQAAgent + UpgradedFinancialAgent
- **ูุธูู**: ูพุฑุณุด ู ูพุงุณุฎ ููุดููุฏ ูุงู
- **ูฺฺฏโูุง**: ฺุช ุจุงุช ูพุดุฑูุชูุ ุชุดุฎุต ุณูุงูุงุช ูุงูุ ูพุงุณุฎโูุง ูุฑูุชโุจูุฏ ุดุฏูุ ุงุจุฒุงุฑูุง ูุงู ุฌุฏุฏ

## ๐จ API Endpoints ฺฉูุฏ
- `/financial-chat/` - ฺุช ููุดููุฏ ูุงู
- `/data-import/` - ุงููพูุฑุช ุฏุงุฏูโูุง
- `/coding-management/` - ูุฏุฑุช ฺฉุฏูฺฏ
- `/reports/` - ฺฏุฒุงุฑุดโูุง ุชุญูู
- `/users/company/select/` - ุงูุชุฎุงุจ ุดุฑฺฉุช
- `/users/dashboard/` - ุฏุงุดุจูุฑุฏ ฺฉุงุฑุจุฑ

## โ๏ธ ูุญุฏูุฏุชโูุง ู ููุงุญุธุงุช ูู (ุจุญุฑุงู)

### ๐ด ุงููุช ู ุฏูุช ูุงู
- **ุงุณุชูุงุฏู ฺฉูุฏ ุงุฒ `Decimal`**: ุชูุงู ูุญุงุณุจุงุช ูุงู ุจุงุฏ ุจุง `Decimal` ุงูุฌุงู ุดูุฏ (ูู float)
- **ูุงฺฏโฺฏุฑ ฺฉุงูู**: ุชูุงู ุนููุงุช ุจุงุฏ ุฏุฑ Audit Trail ุซุจุช ุดูุฏ
- **ูุฏุฑุช ุฎุทุงูุง ุฌุงูุน**: ูุฑ validator ุจุงุฏ `ValidationResult` ุจุฑฺฏุฑุฏุงูุฏ

### ๐ด ุงุณุชุงูุฏุงุฑุฏูุง ุญุณุงุจุฏุงุฑ ุงุฑุงู
- ฺฉุฏูฺฏ ุญุณุงุจโูุง ูุทุงุจู ุจุง ุงุณุชุงูุฏุงุฑุฏ ูู
- ูพุดุชุจุงู ุงุฒ ุฏูุฑูโูุง ูุงู ุดูุณ/ููุงุฏ
- ุณุงุฒฺฏุงุฑ ุจุง ูุฑูโุงูุฒุงุฑูุง ุงุฑุงู (ุฑุงูฺฉุงุฑุงูุ ุณูพุฏุงุฑ)

### ๐ด ฺูุฏูุฑู ุฏุงุฏูโูุง
- ูพุดุชุจุงู ุงุฒ Excel (xls/xlsx), CSV
- ุงุณุชุงูุฏุงุฑุฏุณุงุฒ ุณุชููโูุง ูุชูุงูุช ูุฑูโุงูุฒุงุฑูุง
- Encoding ูุงุฑุณ (UTF-8)

## ๐ ูุนุงุฑูุง ููููุช
- **ุฏูุช ุชุดุฎุต ูุดฺฉูุงุช**: นตูช
- **ุณุฑุนุช ุชุญูู**: < ต ุฏููู ุจุฑุง ุฏุงุฏู ฑฐK ุฑฺฉูุฑุฏ
- **ฺฉุงูุด ุฎุทุงูุง ุณุณุชู**: ธฐูช
- **ูุงุจูุช ุฏุฑฺฉ ฺฏุฒุงุฑุด**: นฐูช ุงุฒ ฺฉุงุฑุจุฑุงู

## ๐ฏ ูุถุนุช ูุนู ู ูฺฏูุฏุงุฑ (ุจุฑุง Cline)

### โ ูพุฑูฺู ุชฺฉูู ุดุฏู ุงุณุช
- **ุณุณุชู ฺฉุงูู**: ุชูุงู ฑฐฐ ุชุณฺฉ ุงุตู ูพุงุฏูโุณุงุฒ ุดุฏู
- **ุขูุงุฏู ุชููุฏ**: ูุงุจูุชโูุง ุงุตู ูุนุงู ู ุชุณุช ุดุฏู
- **ูุณุชูุฏุงุช ฺฉุงูู**: ุฑุงูููุงูุง ฺฉุงุฑุจุฑ ู ูู ููุฌูุฏ

### ๐ง ูฺฏูุฏุงุฑ ู ุจูุจูุฏ
1. **ุจูููโุณุงุฒ**: ุจูุจูุฏ ุนููฺฉุฑุฏ ู UX
2. **ุงูุฒูุฏู ูฺฺฏโูุง**: ูุงุจูุชโูุง ุฌุฏุฏ ุจุฑ ุงุณุงุณ ูุงุฒ ฺฉุงุฑุจุฑุงู
3. **ูพุดุชุจุงู**: ุฑูุน ุจุงฺฏโูุง ู ุจูโุฑูุฒุฑุณุงูโูุง
4. **ููุงุณโูพุฐุฑ**: ุขูุงุฏูโุณุงุฒ ุจุฑุง ูุญุท ุชููุฏ

### ๐ ูุงุจูุชโูุง ูุนู ุณุณุชู
- ุขูพููุฏ ู ุชุญูู ูุงูโูุง ุงฺฉุณู ูุงู
- ุชุญููโูุง ูุงู ูพุดุฑูุชู (ุฏุงุฑุงุ ุจุฏูุ ุณุฑูุงูุ ุชุฑุงุฒูุงูู)
- ฺุช ููุดููุฏ ูุงู ุจุง ููุด ูุตููุน
- ูุฏุฑุช ฺูุฏุดุฑฺฉุช ฺฉุงูู
- ฺฏุฒุงุฑุดโูุง ุญุฑููโุง ู ุชุฑุงุฒ ุขุฒูุงุด
- ุงุญุฑุงุฒ ููุช ู ูุฏุฑุช ฺฉุงุฑุจุฑุงู
- **ุณุณุชู ุงุฑุชูุงุก ุงูุชู**: ุงุจุฒุงุฑูุง ุฌุฏุฏ ุงุญูุงูโูพุฑุณ ู ุชุฑุงุฒ ฺูุงุฑุณุชูู

## ๐ ูฺฉุงุช ฺฉูุฏ ุจุฑุง ุชูุณุนู
- **ุชุณุช ุจุง ุฏุงุฏูโูุง ูุงูุน**: ุงุฒ ุฑูุฒ ุงูู ุจุง ุฏุงุฏู ูุงูุน ุดุฑฺฉุชโูุง ุชุณุช ุดูุฏ
- **ุฏุงฺฉโุงุณุชุฑูฺฏ ูุงุฑุณ**: ุชูุงู ุชูุงุจุน ุงุตู ุจุงุฏ docstring ูุงุฑุณ ุฏุงุดุชู ุจุงุดูุฏ
- **ุชุณุชโูุง ูุงุญุฏ**: ุจุฑุง ูุฑ validator ู analyzer ุชุณุช ุงุฌุจุงุฑ ุงุณุช
- **ูุงูโฺฏุฐุงุฑ**: ุงุณุชูุงุฏู ุงุฒ snake_case ุจุฑุง ูุงูโูุง ู ฺฉูุงุณโูุง ุชูุตูโฺฉููุฏู
