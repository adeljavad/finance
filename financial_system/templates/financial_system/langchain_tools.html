<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ÛŒ Ù‡ÙˆØ´Ù…Ù†Ø¯ Ù…Ø§Ù„ÛŒ - Ø³ÛŒØ³ØªÙ… Ù…Ø§Ù„ÛŒ Ù‡ÙˆØ´Ù…Ù†Ø¯</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    <style>
        .tool-card {
            transition: transform 0.2s ease-in-out;
            border: 1px solid #e9ecef;
            border-radius: 12px;
            margin-bottom: 1.5rem;
        }
        .tool-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        .tool-icon {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }
        .tool-category {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 25px;
            font-size: 0.85rem;
            margin-bottom: 1rem;
        }
        .tool-description {
            color: #6c757d;
            line-height: 1.6;
        }
        .execute-btn {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            border: none;
            border-radius: 25px;
            padding: 0.5rem 1.5rem;
            font-weight: 600;
        }
        .execute-btn:hover {
            transform: scale(1.05);
            background: linear-gradient(135deg, #218838 0%, #1e9e8a 100%);
        }
        .search-box {
            border-radius: 25px;
            border: 2px solid #e9ecef;
            padding: 0.75rem 1.5rem;
        }
        .search-box:focus {
            border-color: #28a745;
            box-shadow: 0 0 0 0.2rem rgba(40, 167, 69, 0.25);
        }
        .category-filter {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 1rem;
            margin-bottom: 2rem;
        }
        .stats-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 15px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }
    </style>
</head>
<body>
    {% extends 'financial_system/base.html' %}
    
    {% block content %}
    <div class="container-fluid py-4">
        <!-- Ù‡Ø¯Ø± ØµÙØ­Ù‡ -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <h1 class="h3 mb-1">
                            <i class="bi bi-robot text-success me-2"></i>
                            Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ÛŒ Ù‡ÙˆØ´Ù…Ù†Ø¯ Ù…Ø§Ù„ÛŒ
                        </h1>
                        <p class="text-muted mb-0">Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡ ØªØ­Ù„ÛŒÙ„ Ù…Ø§Ù„ÛŒ Ù…Ø¨ØªÙ†ÛŒ Ø¨Ø± Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ</p>
                    </div>
                    <div class="stats-card">
                        <div class="text-center">
                            <h2 class="h1 mb-1">{{ tools_count }}</h2>
                            <p class="mb-0">Ø§Ø¨Ø²Ø§Ø± ÙØ¹Ø§Ù„</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        {% if messages %}
        <div class="row mb-4">
            <div class="col-12">
                {% for message in messages %}
                <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
                    <i class="bi bi-{% if message.tags == 'success' %}check-circle{% else %}exclamation-triangle{% endif %} me-2"></i>
                    {{ message }}
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
                {% endfor %}
            </div>
        </div>
        {% endif %}

        <!-- ÙÛŒÙ„ØªØ±Ù‡Ø§ Ùˆ Ø¬Ø³ØªØ¬Ùˆ -->
        <div class="row mb-4">
            <div class="col-md-8">
                <div class="category-filter">
                    <div class="row g-3">
                        <div class="col-md-6">
                            <input type="text" class="form-control search-box" placeholder="ğŸ” Ø¬Ø³ØªØ¬Ùˆ Ø¯Ø± Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§..." id="searchInput">
                        </div>
                        <div class="col-md-6">
                            <select class="form-select search-box" id="categoryFilter">
                                <option value="all">Ù‡Ù…Ù‡ Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒâ€ŒÙ‡Ø§</option>
                                <option value="analysis">ØªØ­Ù„ÛŒÙ„ Ù…Ø§Ù„ÛŒ</option>
                                <option value="audit">Ø­Ø³Ø§Ø¨Ø±Ø³ÛŒ</option>
                                <option value="reporting">Ú¯Ø²Ø§Ø±Ø´â€ŒÚ¯ÛŒØ±ÛŒ</option>
                                <option value="prediction">Ù¾ÛŒØ´â€ŒØ¨ÛŒÙ†ÛŒ</option>
                                <option value="optimization">Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="d-grid">
                    <a href="{% url 'financial_system:dashboard' %}" class="btn btn-outline-secondary">
                        <i class="bi bi-arrow-right me-2"></i>
                        Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯
                    </a>
                </div>
            </div>
        </div>

        <!-- Ù„ÛŒØ³Øª Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ -->
        <div class="row" id="toolsContainer">
            {% if tools %}
                {% for tool in tools %}
                <div class="col-lg-4 col-md-6 tool-item" data-category="analysis">
                    <div class="card tool-card h-100">
                        <div class="card-body">
                            <div class="text-center mb-3">
                                <div class="tool-icon text-success">
                                    <i class="bi bi-graph-up-arrow"></i>
                                </div>
                                <span class="tool-category">ØªØ­Ù„ÛŒÙ„ Ù…Ø§Ù„ÛŒ</span>
                            </div>
                            
                            <h5 class="card-title text-center mb-3">
                                {{ tool.name|default:"Ø§Ø¨Ø²Ø§Ø± Ù…Ø§Ù„ÛŒ" }}
                            </h5>
                            
                            <p class="tool-description text-center mb-4">
                                {{ tool.description|default:"Ø§Ø¨Ø²Ø§Ø± ØªØ­Ù„ÛŒÙ„ Ù…Ø§Ù„ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡" }}
                            </p>
                            
                            <div class="d-grid">
                                <a href="{% url 'financial_system:execute_tool' tool_name=tool.name %}" 
                                   class="btn execute-btn text-white">
                                    <i class="bi bi-play-circle me-2"></i>
                                    Ø§Ø¬Ø±Ø§ÛŒ Ø§Ø¨Ø²Ø§Ø±
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
                {% endfor %}
            {% else %}
                <div class="col-12">
                    <div class="text-center py-5">
                        <i class="bi bi-tools display-1 text-muted mb-3"></i>
                        <h3 class="text-muted">Ù‡ÛŒÚ† Ø§Ø¨Ø²Ø§Ø±ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯</h3>
                        <p class="text-muted">Ø¯Ø± Ø­Ø§Ù„ Ø­Ø§Ø¶Ø± Ù‡ÛŒÚ† Ø§Ø¨Ø²Ø§Ø± Ù‡ÙˆØ´Ù…Ù†Ø¯ÛŒ Ø¨Ø±Ø§ÛŒ Ù†Ù…Ø§ÛŒØ´ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯.</p>
                        <a href="{% url 'financial_system:dashboard' %}" class="btn btn-primary mt-3">
                            <i class="bi bi-arrow-right me-2"></i>
                            Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯
                        </a>
                    </div>
                </div>
            {% endif %}
        </div>

        <!-- Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒÛŒ -->
        <div class="row mt-5">
            <div class="col-12">
                <div class="alert alert-info">
                    <div class="d-flex align-items-center">
                        <i class="bi bi-info-circle display-6 me-3"></i>
                        <div>
                            <h5 class="alert-heading mb-2">Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ÛŒ Ù‡ÙˆØ´Ù…Ù†Ø¯</h5>
                            <p class="mb-2">â€¢ Ø¨Ø±Ø§ÛŒ Ø§Ø¬Ø±Ø§ÛŒ Ù‡Ø± Ø§Ø¨Ø²Ø§Ø±ØŒ Ø±ÙˆÛŒ Ø¯Ú©Ù…Ù‡ "Ø§Ø¬Ø±Ø§ÛŒ Ø§Ø¨Ø²Ø§Ø±" Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯</p>
                            <p class="mb-2">â€¢ Ù†ØªØ§ÛŒØ¬ ØªØ­Ù„ÛŒÙ„ Ø¨Ù„Ø§ÙØ§ØµÙ„Ù‡ Ù¾Ø³ Ø§Ø² Ø§Ø¬Ø±Ø§ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯</p>
                            <p class="mb-0">â€¢ Ø§Ø² Ø¬Ø³ØªØ¬Ùˆ Ùˆ ÙÛŒÙ„ØªØ± Ø¨Ø±Ø§ÛŒ ÛŒØ§ÙØªÙ† Ø³Ø±ÛŒØ¹ Ø§Ø¨Ø²Ø§Ø± Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø± Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ÙÛŒÙ„ØªØ± Ùˆ Ø¬Ø³ØªØ¬ÙˆÛŒ Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§
        document.addEventListener('DOMContentLoaded', function() {
            const searchInput = document.getElementById('searchInput');
            const categoryFilter = document.getElementById('categoryFilter');
            const toolItems = document.querySelectorAll('.tool-item');
            
            function filterTools() {
                const searchTerm = searchInput.value.toLowerCase();
                const selectedCategory = categoryFilter.value;
                
                toolItems.forEach(item => {
                    const toolName = item.querySelector('.card-title').textContent.toLowerCase();
                    const toolDescription = item.querySelector('.tool-description').textContent.toLowerCase();
                    const toolCategory = item.getAttribute('data-category');
                    
                    const matchesSearch = toolName.includes(searchTerm) || toolDescription.includes(searchTerm);
                    const matchesCategory = selectedCategory === 'all' || toolCategory === selectedCategory;
                    
                    if (matchesSearch && matchesCategory) {
                        item.style.display = 'block';
                    } else {
                        item.style.display = 'none';
                    }
                });
            }
            
            searchInput.addEventListener('input', filterTools);
            categoryFilter.addEventListener('change', filterTools);
            
            // Ù†Ù…Ø§ÛŒØ´ Ø§Ù†ÛŒÙ…ÛŒØ´Ù† Ø¨Ø±Ø§ÛŒ Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§
            toolItems.forEach((item, index) => {
                item.style.animationDelay = `${index * 0.1}s`;
            });
        });
    </script>
    {% endblock %}
</body>
</html>
