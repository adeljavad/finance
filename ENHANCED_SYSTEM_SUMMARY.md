# ุณุณุชู ููุดููุฏ ุชุดุฎุต ุงุจุฒุงุฑูุง ูุงู - ุฎูุงุตู ุจูุจูุฏูุง

## ๐ฏ ูุฏู ุงุตู
ุจูุจูุฏ ุณุณุชู ุชุดุฎุต ุงุจุฒุงุฑูุง ูุงู ุจุง ุงุณุชูุงุฏู ุงุฒ ูุฏูโูุง ููุดููุฏ AI ุจุฑุง ุชุดุฎุต ุฏููโุชุฑ ูุตุฏ ฺฉุงุฑุจุฑ

## โ ุจูุจูุฏูุง ุงูุฌุงู ุดุฏู

### 1. ุชูุถุญุงุช ุฌุงูุน ุงุจุฒุงุฑูุง
- ุงุถุงูู ุดุฏู ุฏฺฉุดูุฑ `TOOL_DESCRIPTIONS` ุจุง ุงุทูุงุนุงุช ฺฉุงูู ูุฑ ุงุจุฒุงุฑ
- ุดุงูู ูุงู ูุงุฑุณุ ุชูุถุญุงุชุ ฺฉููุงุช ฺฉูุฏุ ูุซุงูโูุง ู ูุฑูุช ุฎุฑูุฌ
- ฺฉูฺฉ ุจู ูุฏู AI ุจุฑุง ุฏุฑฺฉ ุจูุชุฑ ูุงุจูุชโูุง ูุฑ ุงุจุฒุงุฑ

### 2. ุณุณุชู ุทุจููโุจูุฏ ููุดููุฏ (AI Classifier)
- **ฺฉูุงุณ `AIToolClassifier`** ุจุง ุงูฺฏูุฑุชูโูุง ูพุดุฑูุชู
- **ุณู ูุงู ุชุดุฎุต**:
  - ุชุทุจู ุงูฺฏููุง ูุตุฏ ฺฉุงุฑุจุฑ (Pattern Matching)
  - ุงูุชุงุฒุฏู ฺฉููุงุช ฺฉูุฏ ุจุง ูุฒู (Weighted Keywords)
  - ุชุญูู ุณุงุฎุชุงุฑ ุณูุงู (Question Structure Analysis)

### 3. ุงูฺฏููุง ูพุดุฑูุชู ุชุดุฎุต
```python
intent_patterns = {
    "analyze_ratios": [
        r'.*(ูุณุจุช|ุชุญูู|ูุญุงุณุจู).*(ูุงู|ููุฏูฺฏ|ุณูุฏุขูุฑ|ุงูุฑู|ฺฉุงุฑุง).*',
        r'.*(ูุถุนุช|ฺฺฏููู).*(ููุฏูฺฏ|ุณูุฏุขูุฑ|ุจุงุฒุฏู).*',
        # ... ุงูฺฏููุง ุฏฺฏุฑ
    ],
    # ... ุงุจุฒุงุฑูุง ุฏฺฏุฑ
}
```

### 4. ฺฉููุงุช ฺฉูุฏ ุจุง ูุฒู
```python
weighted_keywords = {
    "analyze_ratios": {
        "ูุณุจุช": 3.0, "ุชุญูู": 2.5, "ููุฏูฺฏ": 2.0, "ุณูุฏุขูุฑ": 2.0,
        "ุจุงุฒุฏู": 2.0, "ูุณุจุช ุฌุงุฑ": 3.0, "ูุณุจุช ุขู": 3.0,
        "ุจุงุฒุฏู ุฏุงุฑุง": 3.0, "ุจุงุฒุฏู ุญููู": 3.0, "ุญุงุดู ุณูุฏ": 2.5
    },
    # ... ุงุจุฒุงุฑูุง ุฏฺฏุฑ
}
```

### 5. ุณุณุชู Fallback ูพุดุฑูุชู
- **ุชุดุฎุต ุณูุงูุงุช ูุจูู** ู ุงุฑุงุฆู ุชูุตูโูุง ุฌุงฺฏุฒู
- **ููุงุด ฺูุฏู ฺฏุฒูู** ุจุง ุงูุชุงุฒ ุงุทููุงู
- **ุชูุถุญุงุช ุชุตูู** ุจุฑุง ุดูุงูุช ุฏุฑ ุชุดุฎุต

### 6. ุงุจุฒุงุฑ ุชุญูู ุฑุณฺฉโูุง ูุงู
- **ุชุงุจุน `analyze_financial_risks_tool`** ุฌุฏุฏ
- ูุญุงุณุจู ุฑุณฺฉโูุง ููุฏูฺฏุ ุงูุฑู ู ุณูุฏุขูุฑ
- ุงุฑุฒุงุจ ุณุทุญ ุฑุณฺฉ ู ุงุฑุงุฆู ุชูุตูโูุง ูุฏุฑุช

### 7. ูุณุฑุงุจ ููุดููุฏ ุฏุฑ FinancialAgent
- **ุชุงุจุน `_ai_enhanced_router`** ุจุฑุง ุชุตููโฺฏุฑ ูพุดุฑูุชู
- ุชุฑฺฉุจ ุณุณุชู ูุฏู ู ุฌุฏุฏ ุจุฑุง ุงุทููุงู ุจุดุชุฑ
- ูุฏุฑุช ุฎุทุง ู fallback ููุดููุฏ

## ๐งช ูุชุงุฌ ุชุณุช

### ุณูุงูุงุช ูููู:
- โ "ฺฉูุชุฑู ุงูุญุฑุงูุงุช ูุงู" โ `detect_anomalies` (ุงูุชุงุฒ: 0.49)
- โ "ุนููฺฉุฑุฏ ูุตู ุดุฑฺฉุช" โ `seasonal_analysis` (ุงูุชุงุฒ: 0.46)
- โ "ฺฏุฒุงุฑุด ุฌุงูุน ูุงู" โ `comprehensive_report` (ุงูุชุงุฒ: 0.33)

### ุณูุงูุงุช ูุจูู (ูุงุฒ ุจู ุจูุจูุฏ):
- โ "ุดูุงุณุง ุฑุณฺฉโูุง ูุงู ุงุตู" โ ูุงุฒ ุจู ุชูุธู ุขุณุชุงูู
- โ "ุชุญูู ูุณุจุชโูุง ูุงู ุดุฑฺฉุช" โ ูุงุฒ ุจู ุจูุจูุฏ ุงูฺฏููุง

## ๐ ูุฒุงุง ุณุณุชู ุฌุฏุฏ

### 1. ุฏูุช ุจุงูุงุชุฑ
- ุชุดุฎุต ูุตุฏ ฺฉุงุฑุจุฑ ุจุง ุงูฺฏูุฑุชูโูุง ฺูุฏูุงู
- ุงูุชุงุฒุฏู ูุจุชู ุจุฑ ูุฒู ู ุงูฺฏู

### 2. ุงูุนุทุงูโูพุฐุฑ ุจุดุชุฑ
- ุชุทุจู ุจุง ุณูุงูุงุช ูพฺุฏู ู ุชุฑฺฉุจ
- ูุฏุฑุช ุณูุงูุงุช ูุจูู ุจุง ุณุณุชู fallback

### 3. ุดูุงูุช
- ุชูุถุญุงุช ุชุตูู ุจุฑุง ูุฑ ุทุจููโุจูุฏ
- ููุงุด ุงูุชุงุฒ ุงุทููุงู

### 4. ูุงุจูุช ุชูุณุนู
- ุงุถุงูู ุดุฏู ุงุจุฒุงุฑูุง ุฌุฏุฏ ุจู ุฑุงุญุช
- ุจูุจูุฏ ุงูฺฏููุง ู ฺฉููุงุช ฺฉูุฏ ุจุฏูู ุชุบุฑ ฺฉุฏ ุงุตู

## ๐ ูุนูุงุฑ ุณุณุชู

```
User Question
    โ
AI Classifier
โโโ Pattern Matching (40%)
โโโ Weighted Keywords (30%)
โโโ Question Structure (30%)
    โ
Tool Selection
    โ
Enhanced Fallback (ุฏุฑ ุตูุฑุช ูุงุฒ)
    โ
Response Generation
```

## ๐ง ุชูุธูุงุช ูุงุจู ุณูุงุฑุดโุณุงุฒ

### ุขุณุชุงููโูุง ุชุดุฎุต:
- **ุงุทููุงู ุจุงูุง**: โฅ 0.6 (ุงุณุชูุงุฏู ูุณุชูู ุงุฒ ุงุจุฒุงุฑ)
- **ุงุทููุงู ูุชูุณุท**: 0.3-0.6 (ุงุณุชูุงุฏู ุงุฒ ุณุณุชู ูุฏู)
- **ุงุทููุงู ูพุงู**: < 0.3 (ุงุณุชูุงุฏู ุงุฒ fallback)

### ูุฒูโูุง ุงูฺฏูุฑุชู:
- ุงูฺฏููุง: 40%
- ฺฉููุงุช ฺฉูุฏ: 30%
- ุณุงุฎุชุงุฑ ุณูุงู: 30%

## ๐ ฺฏุงูโูุง ุจุนุฏ ุจุฑุง ุจูุจูุฏ

1. **ุชูุธู ุขุณุชุงููโูุง** ุจุฑ ุงุณุงุณ ุฏุงุฏูโูุง ูุงูุน
2. **ุงุถุงูู ุดุฏู ุงูฺฏููุง ุจุดุชุฑ** ุจุฑุง ุณูุงูุงุช ูพฺุฏู
3. **ฺฉูพุงุฑฺูโุณุงุฒ ุจุง ูุฏูโูุง NLP** ุจุฑุง ุฏุฑฺฉ ูุนูุง ุจูุชุฑ
4. **ุงุฏฺฏุฑ ุงุฒ ุชุนุงููุงุช ฺฉุงุฑุจุฑ** ุจุฑุง ุจูุจูุฏ ูุฏุงูู

## ๐ ูุชุฌูโฺฏุฑ

ุณุณุชู ุฌุฏุฏ ุจุง ููููุช ูพุงุฏูโุณุงุฒ ุดุฏ ู ูุงุจูุชโูุง ุฒุฑ ุฑุง ุงุฑุงุฆู ูโุฏูุฏ:

- ุชุดุฎุต ููุดููุฏุงููโุชุฑ ุงุจุฒุงุฑูุง ูุงู
- ูุฏุฑุช ุจูุชุฑ ุณูุงูุงุช ูุจูู
- ุงุฑุงุฆู ุชูุถุญุงุช ุดูุงู ุจุฑุง ุชุตููโูุง
- ูุงุจูุช ุชูุณุนู ู ุจูุจูุฏ ูุณุชูุฑ

ุงู ุณุณุชู ูพุงูโุง ูู ุจุฑุง ุชูุณุนู ุจุดุชุฑ ุณุณุชูโูุง ููุดููุฏ ูุงู ูุฑุงูู ูโฺฉูุฏ.
